<VirtualHost *:80>

DocumentRoot /var/www/html/wiki.tdwg.org/
ServerName wiki.tdwg.org
ServerAlias wiki.tdwg.org
ErrorLog logs/wiki.tdwg.org-error_log

# we do not run the wiki anymore!
# but we have an archived TWiki with semi readable text of the pages so we are redirecting to there instead
RewriteEngine on


# Rules to point / and /twiki/ to github
RewriteRule ^/$ https://github.com/tdwg/wiki-archive [L,R=301]
RewriteRule ^/twiki/$ https://github.com/tdwg/wiki-archive/tree/master/twiki/data [L,R=301]

# Rule to redirect pages to github wiki archive text pages
RewriteRule ^/twiki/bin/view/([^/]*)/([^/]*)$ https://github.com/tdwg/wiki-archive/tree/master/twiki/data/$1/$2.txt [L,R=301]
RewriteRule ^/twiki/([^/]*)/([^/]*)$ https://github.com/tdwg/wiki-archive/tree/master/twiki/data/$1/$2.txt [L,R=301]

# Rule to redirect HomePage to WebHome on TDWG GUID
RewriteRule ^/twiki/bin/view/GUID/HomePage https://github.com/tdwg/wiki-archive/tree/master/twiki/data/GUID/WebHome.txt [L,R=301]


</VirtualHost>